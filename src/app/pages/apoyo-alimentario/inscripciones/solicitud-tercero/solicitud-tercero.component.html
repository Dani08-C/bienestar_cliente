<div *ngIf="loading">
    <nb-card>
        <div class="menu-header m-4">
            <h1 *ngIf="periodo==null">
                No hay un periodo activo
            </h1>
        </div>
    </nb-card>
</div>


<div *ngIf="!loading">
    <!-- Caso que no se pueda cargar periodo -->
    <nb-card *ngIf="periodo==null">
        <div class="menu-header m-4">
            <h1>
                No hay un periodo activo para inscripciones
            </h1>
        </div>
    </nb-card>

    <!-- Caso que no se encuentren documentos del estudiante -->
    <nb-card *ngIf="tercero!==null && (estudiante.Documento==null || estudiante.Carnet==null)">
        <div class="menu-header m-4">
            <h1>
                No se encontraron documentos de identificaci贸n del estudiante
            </h1>
        </div>
    </nb-card>

    <!-- Caso que no se pueda cargar tercero -->
    <nb-card *ngIf="periodo!==null && tercero==null">
        <div class="menu-header m-4">
            <h1>
                Hubo un error con tus credenciales, intenta logear de nuevo.
            </h1>

        </div>
    </nb-card>


    <!-- Caso que exista solicitud -->
    <nb-card *ngIf="solicitud!==null && periodo!==null ">
        <nb-card-header>
            <div class="menu-header m-3">
                <h1>
                    Solicitud apoyo alimentario {{ periodo?.Nombre }}
                </h1>
            </div>
        </nb-card-header>
        <hr>
        <nb-card-body>
            <div class="menu-list">
                <div class="item">
                    <label class="sub-item label-color-ud">
                        ID Solicitud:
                    </label>
                    <label class="sub-item field-color-ud ">
                        {{solicitud?.Id}}
                    </label>
                </div>
                <div class="item">
                    <label class="sub-item label-color-ud">
                        Solicitante:
                    </label>
                    <label class="sub-item field-color-ud ">
                        {{tercero?.NombreCompleto}}
                    </label>
                </div>
                <div class="item">
                    <label class="sub-item label-color-ud">
                        Periodo :
                    </label>
                    <label class="sub-item field-color-ud">
                        {{referencia}}
                    </label>
                </div>
                <div class="item">
                    <label class="sub-item label-color-ud">
                        Tipo Solicitud :
                    </label>
                    <label class="sub-item field-color-ud ">
                        {{solicitud?.EstadoTipoSolicitudId.TipoSolicitud.Nombre}}
                    </label>
                </div>
                <div class="item">
                    <label class="sub-item label-color-ud">
                        Estado Solicitud :
                    </label>
                    <label class="sub-item field-color-ud ">
                        {{solicitud.EstadoTipoSolicitudId.EstadoId.Nombre}}
                    </label>
                </div>
                <div class="item">
                    <label class="sub-item label-color-ud">
                        Estado :
                    </label>
                    <label class="sub-item field-color-ud ">
                        <span *ngIf="solicitud?.Activo" class="badge rounded-pill bg-success">Activo</span>
                        <span *ngIf="!solicitud?.Activo" class="badge rounded-pill bg-danger">Inactivo</span>
                    </label>
                </div>
                <div class="item">
                    <label class="sub-item label-color-ud">
                        Solicitud Finalizada :
                    </label>
                    <label class="sub-item field-color-ud ">
                        <span *ngIf="solicitud?.SolicitudFinalizada" class="badge rounded-pill bg-danger">Finalizada</span>
                        <span *ngIf="!solicitud?.SolicitudFinalizada" class="badge rounded-pill bg-success">Activa</span>
                    </label>
                </div>
                <div class="item">
                    <label class="sub-item label-color-ud">
                        Fecha Radicaci贸n :
                    </label>
                    <label class="sub-item field-color-ud ">
                        {{solicitud?.FechaRadicacion | fechaFormat}}
                    </label>
                </div>
                <div class="item">
                    <label class="sub-item label-color-ud">
                        Fecha Creaci贸n :
                    </label>
                    <label class="sub-item field-color-ud ">
                        {{solicitud?.FechaCreacion | fechaFormat}}
                    </label>
                </div>
                <div class="item">
                    <label class="sub-item label-color-ud">
                        Fecha Modificaci贸n :
                    </label>
                    <label class="sub-item field-color-ud ">
                        {{solicitud?.FechaModificacion | fechaFormat}}
                    </label>
                </div>
            </div>


            <div *ngIf="observaciones.length>0">
                <hr>
                <div class="container">
                    <h4>Observaciones</h4>
                    <div class="timeline">
                        <div *ngFor="let obs of observaciones" class="timeline__group">
                            <span class="timeline__year time" aria-hidden="true">{{ obs.FechaCreacion | fechaFormat:'medium' }}
                            </span>
                            <div class="timeline__cards">
                                <div class="timeline__card card">
                                    <header class="card__header">
                                        <b>{{obs.Titulo}}</b>
                                    </header>
                                    <div class="card__content">
                                        <p>{{obs.Valor.split('//')[0]}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nb-card-body>
    </nb-card>

    <!-- Formulario nueva solicitud --------------------------------->
    <ngx-crear-solicitud *ngIf="tercero!=null && solicitud==null && estudiante.Documento!==null && estudiante.Carnet!==null" [tercero]="tercero" [solicitud]="solicitud" [periodo]="periodo" [estudiante]="estudiante"></ngx-crear-solicitud>

</div>